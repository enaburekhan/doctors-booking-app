(this["webpackJsonpdoctors-booking-app"]=this["webpackJsonpdoctors-booking-app"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c,r,a,o,s=n(0),i=n.n(s),j=n(16),u=n.n(j),d=n(4),l=n(7),b=n(5),p=(n(35),n(15)),O=n(6),h=n(10),m=n.n(h),x=n(14),f=n(8),g=n(27),v="https://agile-escarpment-87534.herokuapp.com/api/v1",w=Object(f.b)("user/userAuth",function(){var e=Object(x.a)(m.a.mark((function e(t){var n,c,r,a,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,c=t.password,r=t.age,a=t.endpoint,e.next=3,fetch("".concat(v,"/").concat(a),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:n,password:c,age:r})});case 3:return o=e.sent,e.next=6,o.json();case 6:if(s=e.sent,o.ok){e.next=9;break}throw new Error(s.failure);case 9:return localStorage.setItem("token",s.jwt),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N=Object(f.c)({name:"user",initialState:{loading:!1,error:null,data:null},reducers:{logout:function(){return{loading:!1,error:null,data:null}}},extraReducers:(c={},Object(O.a)(c,w.pending,(function(e){e.loading=!0})),Object(O.a)(c,w.rejected,(function(e,t){e.loading=!1,g.a.error(t.error.message),e.error=t.error.message})),Object(O.a)(c,w.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),c)}),y=N.actions.logout,S=N.reducer,k=n(25),A=n(26),L=n(1),D=function(){return Object(L.jsx)("div",{className:"",children:Object(L.jsx)(k.a,{icon:A.a,spin:!0,size:"10x"})})},E=function(e){var t=e.access,n=e.endpoint,c=Object(b.g)(),r=Object(d.b)(),a=Object(d.c)((function(e){return e.user})),o=Object(s.useState)(""),i=Object(p.a)(o,2),j=i[0],u=i[1],O=Object(s.useState)(""),h=Object(p.a)(O,2),m=h[0],x=h[1],f=Object(s.useState)(""),g=Object(p.a)(f,2),v=g[0],N=g[1];return a.loading?Object(L.jsx)(D,{}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r(w({username:j,password:m,age:v,endpoint:n})).then((function(){c.push("/doctors")}))},children:[Object(L.jsx)("div",{className:"form-group create",children:Object(L.jsxs)("label",{htmlFor:"username",className:"control-label",children:["Username",Object(L.jsx)("input",{type:"text",name:"username",id:"username",required:!0,minLength:"3",maxLength:"15",value:j,onChange:function(e){return u(e.target.value)}})]})}),Object(L.jsx)("div",{className:"form-group create",children:Object(L.jsxs)("label",{htmlFor:"password",className:"control-label",children:["Password",Object(L.jsx)("input",{type:"password",name:"password",id:"password",required:!0,minLength:"5",value:m,onChange:function(e){return x(e.target.value)}})]})}),Object(L.jsx)("div",{className:"form-group create",children:Object(L.jsxs)("label",{htmlFor:"age",className:"control-label",children:["Age",Object(L.jsx)("input",{type:"text",name:"age",id:"age",required:!0,minLength:"1",value:v,onChange:function(e){return N(e.target.value)}})]})}),Object(L.jsx)("div",{className:"form-group create",children:Object(L.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg",children:t})})]}),"Signup"===t?Object(L.jsxs)("p",{className:"text-center",children:["Do you already have an account?"," ",Object(L.jsx)(l.b,{to:"/Login",children:"Login"})]}):Object(L.jsxs)("p",{className:"text-center",children:["Do you need to create an account?"," ",Object(L.jsx)(l.b,{to:"/Signup",children:"Signup"})]})]})},_=Object(f.c)({name:"type",initialState:"",reducers:{changeType:function(e,t){return t.payload}}}),C=_.actions.changeType,T=_.reducer,I=function(){var e=Object(d.b)(),t="Signup";return Object(s.useEffect)((function(){e(C(t))}),[]),Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(E,{access:t,endpoint:"users"})})},z=Object(f.b)("appointments/postAppointments",function(){var e=Object(x.a)(m.a.mark((function e(t,n){var c,r,a,o,s,i,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.user_id,r=t.appointment_date,a=t.doctor_id,o=t.jwt,s=n.dispatch,e.next=4,fetch("".concat(v,"/appointments"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({appointment_date:r,doctor_id:a,user_id:c})});case 4:return i=e.sent,e.next=7,i.json();case 7:if(j=e.sent,s(q(j)),i.ok){e.next=11;break}throw new Error(j.failure);case 11:return localStorage.setItem("token",j.jwt),e.abrupt("return",j);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),F=Object(f.b)("appointments/getAppointments",function(){var e=Object(x.a)(m.a.mark((function e(t){var n,c,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.jwt,c=t.id,e.next=3,fetch("".concat(v,"/appointments/").concat(c),{headers:{Authorization:"Bearer ".concat(n)}});case 3:if((r=e.sent).ok){e.next=6;break}throw new Error(r.statusText);case 6:return e.next=8,r.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),B=Object(f.c)({name:"appointments",initialState:{loading:!1,error:null,data:[]},reducers:{addAppointments:function(e,t){e.data.push(t.payload)}},extraReducers:(r={},Object(O.a)(r,z.pending,(function(e){e.loading=!0})),Object(O.a)(r,z.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(O.a)(r,z.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),Object(O.a)(r,F.pending,(function(e){e.loading=!0})),Object(O.a)(r,F.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(O.a)(r,F.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),r)}),q=B.actions.addAppointments,J=B.reducer,R=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.user})).data,n=Object(d.c)((function(e){return e.appointments})),c=n.data,r=n.loading;return Object(s.useEffect)((function(){t&&e(F(t.user_id))}),[]),t?Object(L.jsxs)("div",{className:"container text-center",children:[Object(L.jsx)("h3",{children:"Appointments"}),r&&Object(L.jsx)("span",{className:"spinner-border spinner-border-lg"}),Object(L.jsx)("div",{className:"d-flex flex-wrap",children:!r&&0===c.length&&Object(L.jsxs)("h4",{children:["You do not have any appointment. Create one",Object(L.jsx)(l.b,{to:"/appointments/new",children:"here"})]})})]}):Object(L.jsx)(b.a,{to:"/Login"})},P=Object(f.b)("doctor/getDoctor",function(){var e=Object(x.a)(m.a.mark((function e(t,n){var c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/doctors/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((c=e.sent).ok){e.next=5;break}throw new Error(c.statusText);case 5:return e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),M=Object(f.c)({name:"doctor",initialState:{loading:!1,error:null,data:null},extraReducers:(a={},Object(O.a)(a,P.pending,(function(e){e.loading=!0})),Object(O.a)(a,P.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(O.a)(a,P.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),a)}).reducer,U=function(){var e=Object(b.h)().id,t=Object(d.b)();Object(s.useEffect)((function(){t(P(e))}),[]);var n=Object(d.c)((function(e){return e.user})),c=Object(d.c)((function(e){return e.doctor}));if(!n)return Object(L.jsx)(b.a,{to:"/Login"});var r=c.data,a=c.loading;return Object(L.jsxs)("div",{className:"",children:[Object(L.jsx)("div",{className:"text-center",children:a&&Object(L.jsx)("span",{className:"spinner-border spinner-border-lg"})}),r&&Object(L.jsxs)("div",{children:[Object(L.jsx)("img",{src:r.image,alt:r.name,className:""}),Object(L.jsx)("p",{children:r.name}),Object(L.jsx)("p",{children:r.specialization}),Object(L.jsx)("p",{children:r.experience}),Object(L.jsx)("p",{children:"consultation fee: 3000 Naira"}),Object(L.jsx)("li",{children:Object(L.jsx)(l.b,{to:{pathname:"/appointments/new",doctorId:r.id},children:"Add Appointment"})})]})]})},V=Object(f.b)("doctors/getDoctors",function(){var e=Object(x.a)(m.a.mark((function e(t){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/doctors"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.statusText);case 5:return e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=Object(f.c)({name:"doctors",initialState:{loading:!1,error:null,data:null},extraReducers:(o={},Object(O.a)(o,V.pending,(function(e){e.loading=!0})),Object(O.a)(o,V.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(O.a)(o,V.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),o)}).reducer,G=function(e){return e.doctors},H=function(){var e=Object(d.b)();Object(s.useEffect)((function(){e(V())}),[e]);var t=Object(d.c)(G),n=t.data&&t.data.map((function(e){return Object(L.jsxs)("div",{className:"",children:[Object(L.jsx)("img",{src:e.image,alt:e.name,className:""}),Object(L.jsx)("p",{children:e.name}),Object(L.jsx)("p",{children:e.specialization}),Object(L.jsx)("p",{children:e.experience}),Object(L.jsx)(l.b,{to:"/doctors/".concat(e.id),className:"",children:"View Doctor"})]},e.id)}));return Object(L.jsxs)("div",{className:"",children:[Object(L.jsx)("h1",{children:"List Doctors"}),Object(L.jsx)("h2",{children:n})]})},K=function(){var e=Object(d.b)(),t="Login";return Object(s.useEffect)((function(){e(C(t))}),[]),Object(L.jsx)(E,{access:t,endpoint:"authentications"})},Q=function(){var e=Object(b.g)(),t=Object(d.b)(),n=Object(d.c)((function(e){return e.type})),c=localStorage.getItem("token");return Object(L.jsxs)("session",{className:"",children:[Object(L.jsx)("h1",{children:n}),c&&Object(L.jsx)("button",{type:"button","aria-label":"Logout",onClick:function(){localStorage.removeItem("token"),t(y()),e.push("/Login")},children:"Logout"})]})},W=function(){return Object(L.jsx)("nav",{children:Object(L.jsxs)("section",{children:[Object(L.jsx)("h5",{children:"Echantill clinic"}),Object(L.jsx)("div",{className:"navContent",children:Object(L.jsx)("div",{className:"navLinks",children:Object(L.jsxs)("ul",{children:[Object(L.jsx)("li",{children:Object(L.jsx)(l.b,{to:"/doctors",children:"Doctors"})}),Object(L.jsx)("li",{children:Object(L.jsx)(l.b,{to:"/appointments",children:"Appointments"})}),Object(L.jsx)("li",{children:Object(L.jsx)(l.b,{to:"/Signup",children:"Signup"})}),Object(L.jsx)("li",{children:Object(L.jsx)(l.b,{to:"/Login",children:"Login"})})]})})})]})})},X=function(){var e=Object(s.useState)(""),t=Object(p.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(""),a=Object(p.a)(r,2),o=a[0],i=a[1],j=Object(s.useState)(!1),u=Object(p.a)(j,2),l=u[0],O=u[1],h=Object(s.useState)(!1),m=Object(p.a)(h,2),x=m[0],f=m[1],g=Object(d.c)((function(e){return e.user})).data,v=g.user_id,w=g.jwt,N=Object(d.b)(),y=Object(d.c)((function(e){return e.doctors})),S=y.data,k=y.error;Object(s.useEffect)((function(){null===S&&g&&N(V()).then((function(){x(!1)})).catch((function(){}))}),[S,N]);var A=o,D=n,E=S&&S.map((function(e){return Object(L.jsx)("option",{value:e.id,children:e.name},e.id)}));return g?l?Object(L.jsx)(b.a,{to:"/appointments"}):Object(L.jsx)("div",{className:"col-md-12",children:Object(L.jsx)("div",{className:"card card-container",children:Object(L.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O(!1),N(z({user_id:v,doctor_id:A,appointment_date:D,jwt:w})).then((function(){O(!0),alert.show("Appointment created",{type:"success",timeout:2e3}),f(!1)})).catch((function(e){console.log(e.message),O(!1)}))},children:[!l&&Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{className:"form-group create",children:Object(L.jsxs)("label",{htmlFor:"appointmentDate",className:"control-label",children:["Appointment Date",Object(L.jsx)("input",{type:"date",className:"form-control",name:"appointmentDate",id:"appointmentDate",required:!0,value:n,onChange:function(e){var t=e.target.value;c(t)}})]})}),Object(L.jsx)("div",{className:"form-group create",children:Object(L.jsxs)("label",{htmlFor:"doctorId",children:["Select from list:",Object(L.jsx)("select",{className:"form-control",id:"doctorId",onChange:function(e){var t=e.target.value;i(t)},value:o,children:x?Object(L.jsx)("option",{children:"Loading.."}):E})]})}),Object(L.jsx)("div",{className:"form-group create",children:Object(L.jsxs)("button",{className:"btn btn-primary btn-block",disabled:x,type:"submit",children:[x&&Object(L.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(L.jsx)("span",{children:"Book"})]})})]}),k&&Object(L.jsx)("div",{className:"form-group",children:Object(L.jsx)("div",{className:l?"alert alert-success":"alert alert-danger",role:"alert",children:k})})]})})}):Object(L.jsx)(b.a,{to:"/login"})};var Z=function(){return Object(L.jsx)("div",{className:"App",children:Object(L.jsxs)(l.a,{children:[Object(L.jsx)(Q,{}),Object(L.jsx)(W,{}),Object(L.jsxs)(b.d,{children:[Object(L.jsx)(b.b,{exact:!0,path:"/Signup",component:I}),Object(L.jsx)(b.b,{exact:!0,path:"/Login",component:K}),Object(L.jsx)(b.b,{exact:!0,path:"/doctors",component:H}),Object(L.jsx)(b.b,{exact:!0,path:"/doctors/:id",component:U}),Object(L.jsx)(b.b,{exact:!0,path:"/appointments/new",component:X}),Object(L.jsx)(b.b,{exact:!0,path:"/appointments",component:R}),Object(L.jsx)(b.a,{to:"/doctors"})]})]})})},$=(n(42),Object(f.a)({reducer:{doctors:Y,appointments:J,user:S,type:T,doctor:M}}));u.a.render(Object(L.jsx)(i.a.StrictMode,{children:Object(L.jsx)(d.a,{store:$,children:Object(L.jsx)(Z,{})})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.7191e0c1.chunk.js.map