(this["webpackJsonpdoctors-booking-app"]=this["webpackJsonpdoctors-booking-app"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c,a,r,o,s,i=n(1),d=n.n(i),l=n(16),j=n.n(l),u=n(3),b=n(6),p=n(7),m=(n(35),n(15)),O=n(5),h=n(9),x=n.n(h),f=n(14),g=n(8),v=n(27),N="https://agile-escarpment-87534.herokuapp.com/api/v1",y=Object(g.b)("user/userAuth",function(){var e=Object(f.a)(x.a.mark((function e(t){var n,c,a,r,o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,c=t.password,a=t.age,r=t.endpoint,e.next=3,fetch("".concat(N,"/").concat(r),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:n,password:c,age:a})});case 3:return o=e.sent,e.next=6,o.json();case 6:if(s=e.sent,o.ok){e.next=9;break}throw new Error(s.failure);case 9:return localStorage.setItem("token",s.jwt),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=Object(g.c)({name:"user",initialState:{loading:!1,error:null,data:null},reducers:{logout:function(){return{loading:!1,error:null,data:null}}},extraReducers:(c={},Object(O.a)(c,y.pending,(function(e){e.loading=!0})),Object(O.a)(c,y.rejected,(function(e,t){e.loading=!1,v.a.error(t.error.message),e.error=t.error.message})),Object(O.a)(c,y.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),c)}),k=w.actions.logout,S=w.reducer,A=n(25),L=n(26),D=n(0),E=function(){return Object(D.jsx)("div",{className:"",children:Object(D.jsx)(A.a,{icon:L.a,spin:!0,size:"10x"})})},T=function(e){var t=e.access,n=e.endpoint,c=Object(p.g)(),a=Object(u.b)(),r=Object(u.c)((function(e){return e.user})),o=Object(i.useState)(""),s=Object(m.a)(o,2),d=s[0],l=s[1],j=Object(i.useState)(""),O=Object(m.a)(j,2),h=O[0],x=O[1],f=Object(i.useState)(""),g=Object(m.a)(f,2),v=g[0],N=g[1],w=localStorage.getItem("token");Object(i.useEffect)((function(){w&&c.push("/")}),[w]);return r.loading?Object(D.jsx)(E,{}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(y({username:d,password:h,age:v,endpoint:n}))},children:[Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"username",className:"control-label",children:["Username",Object(D.jsx)("input",{type:"text",name:"username",id:"username",required:!0,minLength:"3",maxLength:"15",value:d,onChange:function(e){return l(e.target.value)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"password",className:"control-label",children:["Password",Object(D.jsx)("input",{type:"password",name:"password",id:"password",required:!0,minLength:"5",value:h,onChange:function(e){return x(e.target.value)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"age",className:"control-label",children:["Age",Object(D.jsx)("input",{type:"text",name:"age",id:"age",required:!0,minLength:"1",value:v,onChange:function(e){return N(e.target.value)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg",children:t})})]}),"Signup"===t?Object(D.jsxs)("p",{className:"text-center",children:["Do you already have an account?"," ",Object(D.jsx)(b.b,{to:"/Login",children:"Login"})]}):Object(D.jsxs)("p",{className:"text-center",children:["Do you need to create an account?"," ",Object(D.jsx)(b.b,{to:"/Signup",children:"Signup"})]})]})},I=Object(g.c)({name:"type",initialState:"",reducers:{changeType:function(e,t){return t.payload}}}),C=I.actions.changeType,_=I.reducer,z=function(){var e=Object(u.b)(),t="Signup";return Object(i.useEffect)((function(){e(C(t))}),[]),Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(T,{access:t,endpoint:"users"})})},B=Object(g.b)("appointments/postAppointments",function(){var e=Object(f.a)(x.a.mark((function e(t){var n,c,a,r,o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appointment_date,c=t.doctor_id,a=t.user_id,r=localStorage.getItem("token"),e.next=4,fetch("".concat(N,"/appointments"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({appointment_date:n,doctor_id:c,user_id:a})});case 4:return o=e.sent,e.next=7,o.json();case 7:if(s=e.sent,o.ok){e.next=10;break}throw new Error(s.failure);case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(g.b)("appointments/getAppointments",Object(f.a)(x.a.mark((function e(){var t,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,fetch("".concat(N,"/appointments"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error(n.statusText);case 6:return e.next=8,n.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))),R=Object(g.c)({name:"appointments",initialState:{loading:!1,error:null,data:[]},extraReducers:(a={},Object(O.a)(a,B.pending,(function(e){e.loading=!0})),Object(O.a)(a,B.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(O.a)(a,B.fulfilled,(function(e,t){e.loading=!1,e.data.push(t.payload)})),Object(O.a)(a,F.pending,(function(e){e.loading=!0})),Object(O.a)(a,F.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(O.a)(a,F.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),a)}).reducer,q=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.user})).data,n=Object(u.c)((function(e){return e.appointments})),c=n.data,a=n.loading;return Object(i.useEffect)((function(){t&&e(F())}),[e]),t?Object(D.jsxs)("div",{className:"container text-center",children:[Object(D.jsx)("h3",{children:"Appointments"}),a&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"}),Object(D.jsx)("div",{className:"d-flex flex-wrap",children:!a&&0===c.length&&Object(D.jsxs)("h4",{children:["You do not have any appointment. Create one",Object(D.jsx)(b.b,{to:"/appointments/new",children:"here"})]})}),c&&c.map((function(e){var t=new Date(e.appointment_date).toUTCString();return Object(D.jsx)(b.b,{to:"/appointment/".concat(e.id),children:Object(D.jsx)("div",{className:"card m-4",children:Object(D.jsx)("div",{className:"card-body",children:Object(D.jsxs)("p",{children:["On \xa0",t]})})})},e.id)}))]}):Object(D.jsx)(p.a,{to:"/Login"})},J=Object(g.b)("doctor/getDoctor",function(){var e=Object(f.a)(x.a.mark((function e(t,n){var c,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N,"/doctors/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((c=e.sent).ok){e.next=5;break}throw new Error(c.statusText);case 5:return e.next=7,c.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),P=Object(g.c)({name:"doctor",initialState:{loading:!1,error:null,data:null},extraReducers:(r={},Object(O.a)(r,J.pending,(function(e){e.loading=!0})),Object(O.a)(r,J.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(O.a)(r,J.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),r)}).reducer,G=function(){var e=Object(p.h)().id,t=Object(u.b)();Object(i.useEffect)((function(){t(J(e))}),[]);var n=Object(u.c)((function(e){return e.user})),c=Object(u.c)((function(e){return e.doctor}));if(!n)return Object(D.jsx)(p.a,{to:"/Login"});var a=c.data,r=c.loading;return Object(D.jsxs)("div",{className:"",children:[Object(D.jsx)("div",{className:"text-center",children:r&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"})}),a&&Object(D.jsxs)("div",{className:"card style=width: 18rem listDoctors",children:[Object(D.jsx)("img",{src:a.image,alt:a.name,className:"card-img-top"}),Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("p",{children:a.name}),Object(D.jsx)("p",{children:a.specialization}),Object(D.jsx)("p",{children:a.experience}),Object(D.jsx)("span",{children:"experience"}),Object(D.jsx)("p",{children:"consultation fee: 3000 Naira"}),Object(D.jsx)("li",{children:Object(D.jsx)(b.b,{to:{pathname:"/appointments/new",doctorId:a.id},className:"btn btn-primary",children:"Add Appointment"})})]})]})]})},U=Object(g.b)("doctors/getDoctors",function(){var e=Object(f.a)(x.a.mark((function e(t){var n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N,"/doctors"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.statusText);case 5:return e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=Object(g.c)({name:"doctors",initialState:{loading:!1,error:null,data:null},extraReducers:(o={},Object(O.a)(o,U.pending,(function(e){e.loading=!0})),Object(O.a)(o,U.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(O.a)(o,U.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),o)}).reducer,M=function(e){return e.doctors},V=function(){var e=Object(u.b)();Object(i.useEffect)((function(){e(U())}),[e]);var t=Object(u.c)(M),n=t.loading,c=t.data&&t.data.map((function(e){return Object(D.jsx)("div",{className:"card style=width: 18rem listDoctors",children:Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("img",{src:e.image,alt:e.name,className:"card-img-top"}),Object(D.jsx)("p",{children:e.name}),Object(D.jsx)("p",{children:e.specialization}),Object(D.jsx)("p",{children:e.experience}),Object(D.jsx)("span",{children:"experience"}),Object(D.jsx)(b.b,{to:"/doctors/".concat(e.id),className:"btn btn-primary ",children:"View Doctor"})]})},e.id)}));return Object(D.jsxs)("div",{className:"",children:[Object(D.jsx)("h1",{children:"Doctors"}),n&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"}),Object(D.jsx)("h2",{children:c})]})},W=function(){var e=Object(u.b)(),t="Login";return Object(i.useEffect)((function(){e(C(t))}),[]),Object(D.jsx)(T,{access:t,endpoint:"authentications"})},Y=function(){var e=Object(p.g)(),t=Object(u.b)(),n=localStorage.getItem("token");return Object(D.jsx)("div",{className:"",children:n&&Object(D.jsx)("button",{type:"button","aria-label":"Logout",onClick:function(){localStorage.removeItem("token"),t(k()),e.push("/Login")},children:"Logout"})})},K=function(){var e=Object(u.c)((function(e){return e.user})).data;return Object(D.jsxs)("nav",{className:"nav flex-column",children:[Object(D.jsx)("p",{children:"Echantill clinic"}),e&&e.username,e?Object(D.jsxs)("div",{children:[Object(D.jsx)(b.b,{to:"/doctors",className:"doc nav-link active",children:"Doctors"}),Object(D.jsx)(b.b,{to:"/appointments",className:"nav-link",children:"Appointments"}),Object(D.jsx)(Y,{})]}):Object(D.jsxs)("div",{children:[Object(D.jsx)(b.b,{to:"/Signup",className:"nav-link",children:"Signup"}),Object(D.jsx)(b.b,{to:"/Login",className:"nav-link",children:"Login"}),Object(D.jsx)(b.b,{to:"/",className:"nav-link",children:"Home"})]})]})},Q=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(""),r=Object(m.a)(a,2),o=r[0],s=r[1],d=Object(i.useState)(!1),l=Object(m.a)(d,2),j=l[0],b=l[1],O=Object(i.useState)(!1),h=Object(m.a)(O,2),x=h[0],f=h[1],g=Object(u.c)((function(e){return e.user})).data,v=g.user_id,N=Object(u.b)(),y=Object(u.c)((function(e){return e.doctors})),w=y.data,k=y.error,S=o,A=n,L=w&&w.map((function(e){return Object(D.jsx)("option",{value:e.id,children:e.name},e.id)}));return g?j?Object(D.jsx)(p.a,{to:"/appointments"}):Object(D.jsx)("div",{className:"col-md-12",children:Object(D.jsx)("div",{className:"card card-container",children:Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),b(!1),N(B({user_id:v,doctor_id:S,appointment_date:A})).then((function(){b(!0),alert.show("Appointment created",{type:"success",timeout:2e3}),f(!1)})).catch((function(e){console.log(e.message),b(!1)}))},children:[!j&&Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"appointmentDate",className:"control-label",children:["Appointment Date",Object(D.jsx)("input",{type:"date",className:"form-control",name:"appointmentDate",id:"appointmentDate",required:!0,value:n,onChange:function(e){var t=e.target.value;c(t)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"doctorId",children:["Select from list:",Object(D.jsx)("select",{className:"form-control",id:"doctorId",onChange:function(e){var t=e.target.value;s(t)},value:o,selected:S,children:x?Object(D.jsx)("option",{children:"Loading.."}):L})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("button",{className:"btn btn-primary btn-block",disabled:x,type:"submit",children:[x&&Object(D.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(D.jsx)("span",{children:"Book"})]})})]}),k&&Object(D.jsx)("div",{className:"form-group",children:Object(D.jsx)("div",{className:j?"alert alert-success":"alert alert-danger",role:"alert",children:k})})]})})}):Object(D.jsx)(p.a,{to:"/Login"})},X=Object(g.b)("appointment/getAppointment",function(){var e=Object(f.a)(x.a.mark((function e(t){var n,c,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),e.next=3,fetch("".concat(N,"/appointments/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(n)}});case 3:if((c=e.sent).ok){e.next=6;break}throw new Error(c.statusText);case 6:return e.next=8,c.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Z=Object(g.c)({name:"appointment",initialState:{loading:!1,error:null,data:[]},reducers:{deleteAppointment:function(e,t){return e.data?e.data.filter((function(e){return e.id!==t.payload})):e.data}},extraReducers:(s={},Object(O.a)(s,X.pending,(function(e){e.loading=!0})),Object(O.a)(s,X.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(O.a)(s,X.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),s)}),$=Z.actions.deleteAppointment,ee=Z.reducer,te=function(){var e=Object(i.useState)(!1),t=Object(m.a)(e,1)[0],n=Object(u.c)((function(e){return e.user})).data,c=Object(u.b)();if(!n)return Object(D.jsx)(p.a,{to:"/Login"});var a=Object(p.h)().id;if(t)return Object(D.jsx)(p.a,{to:"/appointments"});var r=Object(u.c)((function(e){return e.doctor})),o=r.data,s=r.error,d=r.loading;return Object(D.jsx)("div",{className:"container",children:Object(D.jsxs)("header",{className:"jumbotron",children:[d&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"}),r&&Object(D.jsx)("div",{className:"card w-50",children:Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsxs)("p",{className:"card-text",children:["Appointment Id: \xa0",a]}),Object(D.jsxs)("p",{children:["With \xa0",Object(D.jsx)(b.b,{to:"/doctors/".concat(r.id),children:r.data.name})]}),Object(D.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){!function(e){var t=localStorage.getItem("token");fetch("".concat(N,"/appointments/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(){return c($(e))}))}(a)},disabled:d,children:"Delete"})]})}),s&&Object(D.jsx)("p",{children:o})]})})},ne=function(){return Object(D.jsxs)("div",{className:"card style=width: 18rem listDoctors",children:[Object(D.jsx)("img",{src:"https://user-images.githubusercontent.com/51296741/128604204-e71d0644-e88f-4743-b922-e708aa5a23d9.png",className:"card-img-top",alt:"home-page"}),Object(D.jsx)("div",{className:"card-body"})]})};var ce=function(){return Object(D.jsx)("div",{className:"container",children:Object(D.jsx)("div",{className:"row",children:Object(D.jsxs)(b.a,{children:[Object(D.jsx)("div",{className:"col-3",children:Object(D.jsx)(K,{})}),Object(D.jsx)(p.d,{children:Object(D.jsxs)("div",{className:"col-9",children:[Object(D.jsx)(p.b,{exact:!0,path:"/Signup",component:z}),Object(D.jsx)(p.b,{exact:!0,path:"/Login",component:W}),Object(D.jsx)(p.b,{exact:!0,path:"/doctors",component:V}),Object(D.jsx)(p.b,{exact:!0,path:"/doctors/:id",component:G}),Object(D.jsx)(p.b,{exact:!0,path:"/appointments/new",component:Q}),Object(D.jsx)(p.b,{exact:!0,path:"/appointments",component:q}),Object(D.jsx)(p.b,{exact:!0,path:"/appointment/:id",component:te}),Object(D.jsx)(p.b,{exact:!0,path:"/",component:ne}),Object(D.jsx)(p.a,{to:"/Login"})]})})]})})})},ae=(n(42),Object(g.a)({reducer:{doctors:H,appointments:R,user:S,type:_,doctor:P,appointment:ee}}));j.a.render(Object(D.jsx)(d.a.StrictMode,{children:Object(D.jsx)(u.a,{store:ae,children:Object(D.jsx)(ce,{})})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.9d455923.chunk.js.map