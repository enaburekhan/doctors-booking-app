(this["webpackJsonpdoctors-booking-app"]=this["webpackJsonpdoctors-booking-app"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c,a,r,s,o=n(1),i=n.n(o),d=n(16),l=n.n(d),j=n(3),u=n(5),b=n(6),p=(n(35),n(14)),m=n(7),O=n(10),h=n.n(O),x=n(15),f=n(8),g=n(27),v="https://agile-escarpment-87534.herokuapp.com/api/v1",N=Object(f.b)("user/userAuth",function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c,a,r,s,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,c=t.password,a=t.age,r=t.endpoint,e.next=3,fetch("".concat(v,"/").concat(r),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:n,password:c,age:a})});case 3:return s=e.sent,e.next=6,s.json();case 6:if(o=e.sent,s.ok){e.next=9;break}throw new Error(o.failure);case 9:return localStorage.setItem("token",o.jwt),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=Object(f.c)({name:"user",initialState:{loading:!1,error:null,data:null},reducers:{logout:function(){return{loading:!1,error:null,data:null}}},extraReducers:(c={},Object(m.a)(c,N.pending,(function(e){e.loading=!0})),Object(m.a)(c,N.rejected,(function(e,t){e.loading=!1,g.a.error(t.error.message),e.error=t.error.message})),Object(m.a)(c,N.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),c)}),w=y.actions.logout,k=y.reducer,S=n(25),L=n(26),D=n(0),A=function(){return Object(D.jsx)("div",{className:"",children:Object(D.jsx)(S.a,{icon:L.a,spin:!0,size:"10x"})})},E=function(e){var t=e.access,n=e.endpoint,c=Object(b.g)(),a=Object(j.b)(),r=Object(j.c)((function(e){return e.user})),s=Object(o.useState)(""),i=Object(p.a)(s,2),d=i[0],l=i[1],m=Object(o.useState)(""),O=Object(p.a)(m,2),h=O[0],x=O[1],f=Object(o.useState)(""),g=Object(p.a)(f,2),v=g[0],y=g[1],w=localStorage.getItem("token");Object(o.useEffect)((function(){w&&c.push("/Login")}),[w]);return r.loading?Object(D.jsx)(A,{}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(N({username:d,password:h,age:v,endpoint:n}))},children:[Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"username",className:"control-label",children:["Username",Object(D.jsx)("input",{type:"text",name:"username",id:"username",required:!0,minLength:"3",maxLength:"15",value:d,onChange:function(e){return l(e.target.value)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"password",className:"control-label",children:["Password",Object(D.jsx)("input",{type:"password",name:"password",id:"password",required:!0,minLength:"5",value:h,onChange:function(e){return x(e.target.value)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"age",className:"control-label",children:["Age",Object(D.jsx)("input",{type:"text",name:"age",id:"age",required:!0,minLength:"1",value:v,onChange:function(e){return y(e.target.value)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg",children:t})})]}),"Signup"===t?Object(D.jsxs)("p",{className:"text-center",children:["Do you already have an account?"," ",Object(D.jsx)(u.b,{to:"/Login",children:"Login"})]}):Object(D.jsxs)("p",{className:"text-center",children:["Do you need to create an account?"," ",Object(D.jsx)(u.b,{to:"/Signup",children:"Signup"})]})]})},I=Object(f.c)({name:"type",initialState:"",reducers:{changeType:function(e,t){return t.payload}}}),T=I.actions.changeType,C=I.reducer,_=function(){var e=Object(j.b)(),t="Signup";return Object(o.useEffect)((function(){e(T(t))}),[]),Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(E,{access:t,endpoint:"users"})})},z=Object(f.b)("appointments/postAppointments",function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c,a,r,s,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appointment_date,c=t.doctor_id,a=t.user_id,r=localStorage.getItem("token"),e.next=4,fetch("".concat(v,"/appointments"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({appointment_date:n,doctor_id:c,user_id:a})});case 4:return s=e.sent,e.next=7,s.json();case 7:if(o=e.sent,s.ok){e.next=10;break}throw new Error(o.failure);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),B=Object(f.b)("appointments/getAppointments",Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,fetch("".concat(v,"/appointments"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error(n.statusText);case 6:return e.next=8,n.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))),F=Object(f.c)({name:"appointments",initialState:{loading:!1,error:null,data:[]},extraReducers:(a={},Object(m.a)(a,z.pending,(function(e){e.loading=!0})),Object(m.a)(a,z.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(m.a)(a,z.fulfilled,(function(e,t){e.loading=!1,e.data.push(t.payload)})),Object(m.a)(a,B.pending,(function(e){e.loading=!0})),Object(m.a)(a,B.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(m.a)(a,B.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),a)}).reducer,q=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.user})).data,n=Object(j.c)((function(e){return e.appointments})),c=n.data,a=n.loading;return Object(o.useEffect)((function(){t&&e(B())}),[e]),t?Object(D.jsxs)("div",{className:"container text-center",children:[Object(D.jsx)("h3",{children:"Appointments"}),a&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"}),Object(D.jsx)("div",{className:"d-flex flex-wrap",children:!a&&0===c.length&&Object(D.jsxs)("h4",{children:["You do not have any appointment. Create one",Object(D.jsx)(u.b,{to:"/appointments/new",children:"here"})]})}),c&&c.map((function(e){var t=new Date(e.appointment_date).toUTCString();return Object(D.jsx)(u.b,{to:"/appointment/".concat(e.id),children:Object(D.jsx)("div",{className:"card m-4",children:Object(D.jsx)("div",{className:"card-body",children:Object(D.jsxs)("p",{children:["On \xa0",t]})})})},e.id)}))]}):Object(D.jsx)(b.a,{to:"/Login"})},J=Object(f.b)("doctor/getDoctor",function(){var e=Object(x.a)(h.a.mark((function e(t,n){var c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/doctors/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((c=e.sent).ok){e.next=5;break}throw new Error(c.statusText);case 5:return e.next=7,c.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),R=Object(f.c)({name:"doctor",initialState:{loading:!1,error:null,data:null},extraReducers:(r={},Object(m.a)(r,J.pending,(function(e){e.loading=!0})),Object(m.a)(r,J.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(m.a)(r,J.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),r)}).reducer,P=function(){var e=Object(b.h)().id,t=Object(j.b)();Object(o.useEffect)((function(){t(J(e))}),[]);var n=Object(j.c)((function(e){return e.user})),c=Object(j.c)((function(e){return e.doctor}));if(!n)return Object(D.jsx)(b.a,{to:"/Login"});var a=c.data,r=c.loading;return Object(D.jsxs)("div",{className:"",children:[Object(D.jsx)("div",{className:"text-center",children:r&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"})}),a&&Object(D.jsxs)("div",{className:"card style=width: 18rem listDoctors",children:[Object(D.jsx)("img",{src:a.image,alt:a.name,className:"card-img-top"}),Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("p",{children:a.name}),Object(D.jsx)("p",{children:a.specialization}),Object(D.jsx)("p",{children:a.experience}),Object(D.jsx)("span",{children:"experience"}),Object(D.jsx)("p",{children:"consultation fee: 3000 Naira"}),Object(D.jsx)("li",{children:Object(D.jsx)(u.b,{to:{pathname:"/appointments/new",doctorId:a.id},className:"btn btn-primary",children:"Add Appointment"})})]})]})]})},U=Object(f.b)("doctors/getDoctors",function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/doctors"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.statusText);case 5:return e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=Object(f.c)({name:"doctors",initialState:{loading:!1,error:null,data:null},extraReducers:(s={},Object(m.a)(s,U.pending,(function(e){e.loading=!0})),Object(m.a)(s,U.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(m.a)(s,U.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),s)}).reducer,H=function(e){return e.doctors},M=function(){var e=Object(j.b)();Object(o.useEffect)((function(){e(U())}),[e]);var t=Object(j.c)(H),n=t.loading,c=t.data&&t.data.map((function(e){return Object(D.jsx)("div",{className:"card style=width: 18rem listDoctors",children:Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("img",{src:e.image,alt:e.name,className:"card-img-top"}),Object(D.jsx)("p",{children:e.name}),Object(D.jsx)("p",{children:e.specialization}),Object(D.jsx)("p",{children:e.experience}),Object(D.jsx)("span",{children:"experience"}),Object(D.jsx)(u.b,{to:"/doctors/".concat(e.id),className:"btn btn-primary ",children:"View Doctor"})]})},e.id)}));return Object(D.jsxs)("div",{className:"",children:[Object(D.jsx)("h1",{children:"Doctors"}),n&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"}),Object(D.jsx)("h2",{children:c})]})},V=function(){var e=Object(j.b)(),t="Login";return Object(o.useEffect)((function(){e(T(t))}),[]),Object(D.jsx)(E,{access:t,endpoint:"authentications"})},W=function(){var e=Object(b.g)(),t=Object(j.b)(),n=localStorage.getItem("token");return Object(D.jsx)("div",{className:"",children:n&&Object(D.jsx)("button",{type:"button","aria-label":"Logout",onClick:function(){localStorage.removeItem("token"),t(w()),e.push("/")},children:"Logout"})})},Y=function(){var e=Object(j.c)((function(e){return e.user})).data;return Object(D.jsxs)("nav",{className:"nav flex-column",children:[Object(D.jsx)("p",{children:"Echantill clinic"}),e&&e.username,e?Object(D.jsxs)("div",{children:[Object(D.jsx)(u.b,{to:"/doctors",className:"doc nav-link active",children:"Doctors"}),Object(D.jsx)(u.b,{to:"/appointments",className:"nav-link",children:"Appointments"}),Object(D.jsx)(W,{})]}):Object(D.jsxs)("div",{children:[Object(D.jsx)(u.b,{to:"/Signup",className:"nav-link",children:"Signup"}),Object(D.jsx)(u.b,{to:"/Login",className:"nav-link",children:"Login"}),Object(D.jsx)(u.b,{to:"/",className:"nav-link",children:"Home"})]})]})},K=function(){var e=Object(o.useState)(""),t=Object(p.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(""),r=Object(p.a)(a,2),s=r[0],i=r[1],d=Object(o.useState)(!1),l=Object(p.a)(d,2),u=l[0],m=l[1],O=Object(o.useState)(!1),h=Object(p.a)(O,2),x=h[0],f=h[1],g=Object(j.c)((function(e){return e.user})).data,v=g.user_id,N=Object(j.b)(),y=Object(j.c)((function(e){return e.doctors})),w=y.data,k=y.error,S=s,L=n,A=w&&w.map((function(e){return Object(D.jsx)("option",{value:e.id,children:e.name},e.id)}));return g?u?Object(D.jsx)(b.a,{to:"/appointments"}):Object(D.jsx)("div",{className:"col-md-12",children:Object(D.jsx)("div",{className:"card card-container",children:Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m(!1),N(z({user_id:v,doctor_id:S,appointment_date:L})).then((function(){m(!0),alert.show("Appointment created",{type:"success",timeout:2e3}),f(!1)})).catch((function(e){console.log(e.message),m(!1)}))},children:[!u&&Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"appointmentDate",className:"control-label",children:["Appointment Date",Object(D.jsx)("input",{type:"date",className:"form-control",name:"appointmentDate",id:"appointmentDate",required:!0,value:n,onChange:function(e){var t=e.target.value;c(t)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"doctorId",children:["Select from list:",Object(D.jsx)("select",{className:"form-control",id:"doctorId",onChange:function(e){var t=e.target.value;i(t)},value:s,selected:S,children:x?Object(D.jsx)("option",{children:"Loading.."}):A})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("button",{className:"btn btn-primary btn-block",disabled:x,type:"submit",children:[x&&Object(D.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(D.jsx)("span",{children:"Book"})]})})]}),k&&Object(D.jsx)("div",{className:"form-group",children:Object(D.jsx)("div",{className:u?"alert alert-success":"alert alert-danger",role:"alert",children:k})})]})})}):Object(D.jsx)(b.a,{to:"/Login"})},Q=function(){var e=Object(o.useState)(!1),t=Object(p.a)(e,1)[0],n=Object(j.c)((function(e){return e.user})).data,c=Object(j.c)((function(e){return e.doctor})),a=Object(j.b)();if(!n)return Object(D.jsx)(b.a,{to:"/Login"});var r=Object(b.h)().id;if(t)return Object(D.jsx)(b.a,{to:"/appointments"});var s=c.data,i=c.error,d=c.loading;return Object(D.jsx)("div",{className:"container",children:Object(D.jsxs)("header",{className:"jumbotron",children:[d&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"}),c&&Object(D.jsx)("div",{className:"card w-50",children:Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsxs)("p",{className:"card-text",children:["Appointment Id: \xa0",r]}),Object(D.jsxs)("p",{children:["With \xa0",Object(D.jsx)(u.b,{to:"/doctors/".concat(c.id),children:c.data.name})]}),Object(D.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){!function(e){var t=localStorage.getItem("token");fetch("".concat(v,"/appointments/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(){return a(B(t))}))}(r)},disabled:d,children:"Delete"})]})}),i&&Object(D.jsx)("p",{children:s})]})})},X=function(){return Object(D.jsxs)("div",{className:"card style=width: 18rem listDoctors",children:[Object(D.jsx)("img",{src:"https://user-images.githubusercontent.com/51296741/128604204-e71d0644-e88f-4743-b922-e708aa5a23d9.png",className:"card-img-top",alt:"home-page"}),Object(D.jsx)("div",{className:"card-body"})]})};var Z=function(){return Object(D.jsx)("div",{className:"container",children:Object(D.jsx)("div",{className:"row",children:Object(D.jsxs)(u.a,{children:[Object(D.jsx)("div",{className:"col-3",children:Object(D.jsx)(Y,{})}),Object(D.jsx)(b.d,{children:Object(D.jsxs)("div",{className:"col-9",children:[Object(D.jsx)(b.b,{exact:!0,path:"/Signup",component:_}),Object(D.jsx)(b.b,{exact:!0,path:"/Login",component:V}),Object(D.jsx)(b.b,{exact:!0,path:"/doctors",component:M}),Object(D.jsx)(b.b,{exact:!0,path:"/doctors/:id",component:P}),Object(D.jsx)(b.b,{exact:!0,path:"/appointments/new",component:K}),Object(D.jsx)(b.b,{exact:!0,path:"/appointments",component:q}),Object(D.jsx)(b.b,{exact:!0,path:"/appointment/:id",component:Q}),Object(D.jsx)(b.b,{exact:!0,path:"/",component:X}),Object(D.jsx)(b.a,{to:"/Login"})]})})]})})})},$=(n(42),Object(f.a)({reducer:{doctors:G,appointments:F,user:k,type:C,doctor:R}}));l.a.render(Object(D.jsx)(i.a.StrictMode,{children:Object(D.jsx)(j.a,{store:$,children:Object(D.jsx)(Z,{})})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.95932709.chunk.js.map