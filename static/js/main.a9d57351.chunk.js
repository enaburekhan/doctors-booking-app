(this["webpackJsonpdoctors-booking-app"]=this["webpackJsonpdoctors-booking-app"]||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c,a,r,s,o=n(1),i=n.n(o),d=n(18),l=n.n(d),j=n(3),b=n(5),u=n(6),p=(n(36),n(14)),m=n(7),O=n(10),h=n.n(O),x=n(15),f=n(8),g=n(28),v="https://agile-escarpment-87534.herokuapp.com/api/v1",N=Object(f.b)("user/userAuth",function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c,a,r,s,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,c=t.password,a=t.age,r=t.endpoint,e.next=3,fetch("".concat(v,"/").concat(r),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:n,password:c,age:a})});case 3:return s=e.sent,e.next=6,s.json();case 6:if(o=e.sent,s.ok){e.next=9;break}throw new Error(o.failure);case 9:return localStorage.setItem("token",o.jwt),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=Object(f.c)({name:"user",initialState:{loading:!1,error:null,data:null},reducers:{logout:function(){return{loading:!1,error:null,data:null}}},extraReducers:(c={},Object(m.a)(c,N.pending,(function(e){e.loading=!0})),Object(m.a)(c,N.rejected,(function(e,t){e.loading=!1,g.a.error(t.error.message),e.error=t.error.message})),Object(m.a)(c,N.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),c)}),w=y.actions.logout,k=y.reducer,S=n(16),A=n(22),E=n(0),L=function(){return Object(E.jsx)("div",{className:"loading",children:Object(E.jsx)(S.a,{icon:A.b,spin:!0,size:"5x"})})},D=function(e){var t=e.access,n=e.endpoint,c=Object(u.g)(),a=Object(j.b)(),r=Object(j.c)((function(e){return e.user})),s=Object(o.useState)(""),i=Object(p.a)(s,2),d=i[0],l=i[1],m=Object(o.useState)(""),O=Object(p.a)(m,2),h=O[0],x=O[1],f=Object(o.useState)(""),g=Object(p.a)(f,2),v=g[0],y=g[1],w=localStorage.getItem("token");Object(o.useEffect)((function(){w&&c.push("/doctors")}),[w]);return r.loading?Object(E.jsx)(L,{}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(N({username:d,password:h,age:v,endpoint:n}))},children:[Object(E.jsx)("div",{className:"form-group create",children:Object(E.jsxs)("label",{htmlFor:"username",className:"control-label",children:["Username",Object(E.jsx)("input",{type:"text",name:"username",id:"username",required:!0,minLength:"3",maxLength:"15",value:d,onChange:function(e){return l(e.target.value)}})]})}),Object(E.jsx)("div",{className:"form-group create",children:Object(E.jsxs)("label",{htmlFor:"password",className:"control-label",children:["Password",Object(E.jsx)("input",{type:"password",name:"password",id:"password",required:!0,minLength:"5",value:h,onChange:function(e){return x(e.target.value)}})]})}),Object(E.jsx)("div",{className:"form-group create",children:Object(E.jsxs)("label",{htmlFor:"age",className:"control-label",children:["Age",Object(E.jsx)("input",{type:"number",name:"age",id:"age",required:!0,minLength:"1",value:v,onChange:function(e){return y(e.target.value)}})]})}),Object(E.jsx)("div",{className:"form-group create",children:Object(E.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg",children:t})})]}),"Signup"===t?Object(E.jsxs)("p",{className:"text-center",children:["Do you already have an account?"," ",Object(E.jsx)(b.b,{to:"/Login",children:"Login"})]}):Object(E.jsxs)("p",{className:"text-center",children:["Do you need to create an account?"," ",Object(E.jsx)(b.b,{to:"/Signup",children:"Signup"})]})]})},I=Object(f.c)({name:"type",initialState:"",reducers:{changeType:function(e,t){return t.payload}}}),z=I.actions.changeType,T=I.reducer,C=function(){var e=Object(j.b)(),t="Signup";return Object(o.useEffect)((function(){e(z(t))}),[]),Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(D,{access:t,endpoint:"users"})})},_=Object(f.b)("appointments/postAppointments",function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c,a,r,s,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appointment_date,c=t.doctor_id,a=t.user_id,r=localStorage.getItem("token"),e.next=4,fetch("".concat(v,"/appointments"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({appointment_date:n,doctor_id:c,user_id:a})});case 4:return s=e.sent,e.next=7,s.json();case 7:if(o=e.sent,s.ok){e.next=10;break}throw new Error(o.failure);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(f.b)("appointments/getAppointments",Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,fetch("".concat(v,"/appointments"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error(n.statusText);case 6:return e.next=8,n.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))),B=Object(f.c)({name:"appointments",initialState:{loading:!1,error:null,data:[]},extraReducers:(a={},Object(m.a)(a,_.pending,(function(e){e.loading=!0})),Object(m.a)(a,_.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(m.a)(a,_.fulfilled,(function(e,t){e.loading=!1,e.data.push(t.payload)})),Object(m.a)(a,F.pending,(function(e){e.loading=!0})),Object(m.a)(a,F.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(m.a)(a,F.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),a)}).reducer,q=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.user})).data,n=Object(j.c)((function(e){return e.appointments})),c=n.data,a=n.loading;return Object(o.useEffect)((function(){t&&e(F())}),[e]),t?Object(E.jsxs)("div",{className:"card text-center",children:[Object(E.jsx)("h3",{children:"Appointments"}),a&&Object(E.jsx)("span",{className:"spinner-border spinner-border-lg"}),Object(E.jsx)("div",{className:"card-body d-flex flex-wrap",children:!a&&0===c.length&&Object(E.jsxs)("h4",{className:"create-appointment",children:["You do not have any appointment. Create one",Object(E.jsx)(b.b,{to:"/appointments/new",children:"here"})]})}),c&&c.map((function(e){var t=new Date(e.appointment_date).toUTCString();return Object(E.jsx)(b.b,{to:"/appointment/".concat(e.id),children:Object(E.jsx)("div",{className:"card m-4",children:Object(E.jsx)("div",{className:"card-body",children:Object(E.jsxs)("p",{children:["On \xa0",t]})})})},e.id)}))]}):Object(E.jsx)(u.a,{to:"/Login"})},J=Object(f.b)("doctor/getDoctor",function(){var e=Object(x.a)(h.a.mark((function e(t,n){var c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/doctors/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((c=e.sent).ok){e.next=5;break}throw new Error(c.statusText);case 5:return e.next=7,c.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),R=Object(f.c)({name:"doctor",initialState:{loading:!1,error:null,data:null},extraReducers:(r={},Object(m.a)(r,J.pending,(function(e){e.loading=!0})),Object(m.a)(r,J.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(m.a)(r,J.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),r)}).reducer,P=function(){var e=Object(u.h)().id,t=Object(j.b)();Object(o.useEffect)((function(){t(J(e))}),[]);var n=Object(j.c)((function(e){return e.user})),c=Object(j.c)((function(e){return e.doctor}));if(!n)return Object(E.jsx)(u.a,{to:"/Login"});var a=c.data,r=c.loading;return Object(E.jsxs)("div",{className:"",children:[Object(E.jsx)("div",{className:"text-center",children:r&&Object(E.jsx)("span",{className:"spinner-border spinner-border-lg"})}),a&&Object(E.jsxs)("div",{className:"card style=width: 18rem",children:[Object(E.jsx)("img",{src:a.image,alt:a.name,className:"card-img-top single-doctor-img"}),Object(E.jsxs)("div",{className:"card-body",children:[Object(E.jsx)("p",{children:a.name}),Object(E.jsx)("p",{children:a.specialization}),Object(E.jsx)("p",{children:a.experience}),Object(E.jsx)("p",{children:"experience"}),Object(E.jsx)("p",{children:"consultation fee: 3000 Naira"}),Object(E.jsx)(b.b,{to:{pathname:"/appointments/new",doctorId:a.id},className:"btn btn-info",children:"Add Appointment"})]})]})]})},U=Object(f.b)("doctors/getDoctors",function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/doctors"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.statusText);case 5:return e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=Object(f.c)({name:"doctors",initialState:{loading:!1,error:null,data:null},extraReducers:(s={},Object(m.a)(s,U.pending,(function(e){e.loading=!0})),Object(m.a)(s,U.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(m.a)(s,U.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),s)}).reducer,H=function(e){return e.doctors},M=function(){var e=Object(j.b)();Object(o.useEffect)((function(){e(U())}),[e]);var t=Object(j.c)(H),n=t.loading,c=t.data&&t.data.map((function(e){return Object(E.jsx)("div",{className:"card style=width: 18rem ",children:Object(E.jsxs)("div",{className:"card-body col-3 listDoctors",children:[Object(E.jsx)("img",{src:e.image,alt:e.name,className:"card-img-top doctor-img"}),Object(E.jsx)("p",{className:"doctor-name",children:e.name}),Object(E.jsx)("p",{className:"doctor-specialization",children:e.specialization}),Object(E.jsxs)("div",{children:[Object(E.jsx)("p",{className:"doctor-experience",children:e.experience}),Object(E.jsx)("p",{children:"experience"})]}),Object(E.jsx)(b.b,{to:"/doctors/".concat(e.id),className:"btn btn-info ",children:"View Doctor"})]})},e.id)}));return Object(E.jsxs)("div",{className:"",children:[Object(E.jsx)("h2",{children:"Doctors"}),n&&Object(E.jsx)("span",{className:"spinner-border spinner-border-lg"}),Object(E.jsx)("h2",{children:c})]})},V=function(){var e=Object(j.b)(),t="Login";Object(o.useEffect)((function(){e(z(t))}),[]);var n=Object(j.c)((function(e){return e.user})).error;return Object(E.jsx)(E.Fragment,{children:n?Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{className:"login-error",children:n}),Object(E.jsx)("br",{}),Object(E.jsx)(D,{access:t,endpoint:"authentications"})]}):Object(E.jsx)(D,{access:t,endpoint:"authentications"})})},W=n(17),Y=n(23);W.b.add(Y.a,Y.c,Y.b);var K=function(){return Object(E.jsxs)("div",{className:"d-flex justify-content-around social-icons",children:[Object(E.jsx)(S.a,{icon:["fab","twitter"],size:"lg",className:""}),Object(E.jsx)(S.a,{icon:["fab","facebook-f"],size:"lg",className:""}),Object(E.jsx)(S.a,{icon:["fab","instagram"],size:"lg",className:""})]})},Q=function(){var e=Object(u.g)(),t=Object(j.b)(),n=localStorage.getItem("token");return Object(E.jsx)("div",{className:"logout",children:n&&Object(E.jsxs)("button",{type:"button","aria-label":"Logout",onClick:function(){localStorage.removeItem("token"),t(w()),e.push("/")},children:[Object(E.jsx)("span",{children:"Logout"}),Object(E.jsx)(S.a,{icon:A.a})]})})},X=function(){var e=Object(j.c)((function(e){return e.user})).data,t=localStorage.getItem("token");return Object(E.jsxs)("nav",{className:"nav",children:[Object(E.jsx)("p",{children:"Echantill hospital"}),Object(E.jsxs)("div",{className:"nav-home d-flex flex-column justify-content-between align-items-center  m-4",children:[Object(E.jsxs)("div",{children:[e&&e.username,t?Object(E.jsxs)("div",{children:[Object(E.jsx)(b.b,{to:"/doctors",className:"doc nav-link active",children:"Doctors"}),Object(E.jsx)(b.b,{to:"/appointments",className:"appoint-md nav-link",children:"Appointments"}),Object(E.jsx)(Q,{})]}):Object(E.jsxs)("div",{className:"nav-home",children:[Object(E.jsx)(b.b,{to:"/",className:"nav-link",children:"Home"}),Object(E.jsx)(b.b,{to:"/Signup",className:"nav-link",children:"Signup"}),Object(E.jsx)(b.b,{to:"/Login",className:"nav-link",children:"Login"})]})]}),Object(E.jsxs)("div",{className:"nav-footer",children:[Object(E.jsx)(K,{}),Object(E.jsx)("p",{children:"\xa92021, Echantill hospital"})]})]})]})},Z=function(){var e=Object(o.useState)(""),t=Object(p.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(""),r=Object(p.a)(a,2),s=r[0],i=r[1],d=Object(o.useState)(!1),l=Object(p.a)(d,2),b=l[0],m=l[1],O=Object(o.useState)(!1),h=Object(p.a)(O,2),x=h[0],f=h[1],g=Object(j.c)((function(e){return e.user})).data,v=Object(j.b)(),N=Object(j.c)((function(e){return e.doctors})),y=N.data,w=N.error,k=s,S=n,A=g.user_id,L=y&&y.map((function(e){return Object(E.jsx)("option",{value:e.id,children:e.name},e.id)}));return A?b?Object(E.jsx)(u.a,{to:"/appointments"}):Object(E.jsx)("div",{className:"col-md-12",children:Object(E.jsx)("div",{className:"card card-container",children:Object(E.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m(!1),v(_({user_id:A,doctor_id:k,appointment_date:S})).then((function(){m(!0),alert.show("Appointment created",{type:"success",timeout:2e3}),f(!1)})).catch((function(e){console.log(e.message),m(!1)}))},children:[!b&&Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{className:"form-group create",children:Object(E.jsxs)("label",{htmlFor:"appointmentDate",className:"control-label",children:["Appointment Date",Object(E.jsx)("input",{type:"datetime-local",className:"form-control",name:"appointmentDate",id:"appointmentDate",required:!0,value:n,onChange:function(e){var t=e.target.value;c(t)}})]})}),Object(E.jsx)("div",{className:"form-group create",children:Object(E.jsxs)("label",{htmlFor:"doctorId",children:["Select from list:",Object(E.jsx)("select",{className:"form-control",id:"doctorId",onChange:function(e){var t=e.target.value;i(t)},value:s,selected:k,children:x?Object(E.jsx)("option",{children:"Loading.."}):L})]})}),Object(E.jsx)("div",{className:"form-group create",children:Object(E.jsxs)("button",{className:"btn btn-primary btn-block",disabled:x,type:"submit",children:[x&&Object(E.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(E.jsx)("span",{children:"Book"})]})})]}),w&&Object(E.jsx)("div",{className:"form-group",children:Object(E.jsx)("div",{className:b?"alert alert-success":"alert alert-danger",role:"alert",children:w})})]})})}):Object(E.jsx)(u.a,{to:"/Login"})},$=function(){var e=Object(o.useState)(!1),t=Object(p.a)(e,1)[0],n=Object(j.c)((function(e){return e.user})).data,c=Object(j.c)((function(e){return e.doctor})),a=Object(j.b)();if(!n)return Object(E.jsx)(u.a,{to:"/Login"});var r=Object(u.h)().id;if(t)return Object(E.jsx)(u.a,{to:"/appointments"});var s=c.data,i=c.error,d=c.loading;return Object(E.jsx)("div",{className:"container",children:Object(E.jsxs)("header",{className:"jumbotron",children:[d&&Object(E.jsx)("span",{className:"spinner-border spinner-border-lg"}),c&&Object(E.jsx)("div",{className:"card w-50",children:Object(E.jsxs)("div",{className:"card-body",children:[Object(E.jsxs)("p",{className:"card-text",children:["Appointment Id: \xa0",r]}),Object(E.jsxs)("p",{children:["With \xa0",Object(E.jsx)(b.b,{to:"/doctors/".concat(c.id),children:c.data.name})]}),Object(E.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){!function(e){var t=localStorage.getItem("token");fetch("".concat(v,"/appointments/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(){return a(F(t))}))}(r)},disabled:d,children:"Delete"})]})}),i&&Object(E.jsx)("p",{children:s})]})})},ee=function(){return Object(E.jsxs)("div",{className:"card style=width: 18rem home m-4",children:[Object(E.jsx)("img",{src:"https://user-images.githubusercontent.com/51296741/128604204-e71d0644-e88f-4743-b922-e708aa5a23d9.png",className:"card-img-top",alt:"home-page"}),Object(E.jsx)("div",{className:"card-body"})]})};var te=function(){return Object(E.jsx)("div",{className:"container",children:Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)(b.a,{children:[Object(E.jsx)("div",{className:"col-3",children:Object(E.jsx)(X,{})}),Object(E.jsx)(u.d,{children:Object(E.jsxs)("div",{className:"col-9",children:[Object(E.jsx)(u.b,{exact:!0,path:"/Signup",component:C}),Object(E.jsx)(u.b,{exact:!0,path:"/Login",component:V}),Object(E.jsx)(u.b,{exact:!0,path:"/doctors",component:M}),Object(E.jsx)(u.b,{exact:!0,path:"/doctors/:id",component:P}),Object(E.jsx)(u.b,{exact:!0,path:"/appointments/new",component:Z}),Object(E.jsx)(u.b,{exact:!0,path:"/appointments",component:q}),Object(E.jsx)(u.b,{exact:!0,path:"/appointment/:id",component:$}),Object(E.jsx)(u.b,{exact:!0,path:"/",component:ee}),Object(E.jsx)(u.a,{to:"/"})]})})]})})})},ne=(n(43),Object(f.a)({reducer:{doctors:G,appointments:B,user:k,type:T,doctor:R}}));l.a.render(Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(j.a,{store:ne,children:Object(E.jsx)(te,{})})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.a9d57351.chunk.js.map