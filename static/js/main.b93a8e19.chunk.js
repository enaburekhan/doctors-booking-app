(this["webpackJsonpdoctors-booking-app"]=this["webpackJsonpdoctors-booking-app"]||[]).push([[0],{49:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var c,a,r,s,o=n(1),i=n.n(o),l=n(21),d=n.n(l),j=n(3),b=n(25),u=n(32),p=n(6),m=n(7),O=(n(42),n(16)),h=n(8),x=n(12),f=n.n(x),g=n(17),v=n(9),N=n(34),y="https://agile-escarpment-87534.herokuapp.com/api/v1",w=Object(v.b)("user/userAuth",function(){var e=Object(g.a)(f.a.mark((function e(t){var n,c,a,r,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,c=t.password,a=t.age,r=t.endpoint,e.next=3,fetch("".concat(y,"/").concat(r),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:n,password:c,age:a})});case 3:return s=e.sent,e.next=6,s.json();case 6:if(o=e.sent,!(s.status>=400&&s.status<600)){e.next=9;break}throw new Error(o.failure);case 9:return localStorage.setItem("token",o.jwt),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=Object(v.c)({name:"user",initialState:{loading:!1,error:null,data:null},reducers:{logout:function(){return{loading:!1,error:null,data:null}}},extraReducers:(c={},Object(h.a)(c,w.pending,(function(e){e.loading=!0})),Object(h.a)(c,w.rejected,(function(e,t){e.loading=!1,N.a.error(t.error.message),e.error=t.error.message})),Object(h.a)(c,w.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),c)}),S=k.actions.logout,A=k.reducer,E=n(18),L=n(26),D=n(0),I=function(){return Object(D.jsx)("div",{className:"loading",children:Object(D.jsx)(E.a,{icon:L.b,spin:!0,size:"5x"})})},z=function(e){var t=e.access,n=e.endpoint,c=Object(m.g)(),a=Object(j.b)(),r=Object(j.c)((function(e){return e.user})),s=Object(o.useState)(""),i=Object(O.a)(s,2),l=i[0],d=i[1],b=Object(o.useState)(""),u=Object(O.a)(b,2),h=u[0],x=u[1],f=Object(o.useState)(""),g=Object(O.a)(f,2),v=g[0],N=g[1],y=localStorage.getItem("token");Object(o.useEffect)((function(){y&&c.push("/doctors")}),[y]);return r.loading?Object(D.jsx)(I,{}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(w({username:l,password:h,age:v,endpoint:n}))},children:[Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"username",className:"control-label",children:["Username",Object(D.jsx)("input",{type:"text",name:"username",id:"username",required:!0,minLength:"3",maxLength:"15",value:l,onChange:function(e){return d(e.target.value)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"password",className:"control-label",children:["Password",Object(D.jsx)("input",{type:"password",name:"password",id:"password",required:!0,minLength:"5",value:h,onChange:function(e){return x(e.target.value)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"age",className:"control-label",children:["Age",Object(D.jsx)("input",{type:"number",name:"age",id:"age",required:!0,minLength:"1",value:v,onChange:function(e){return N(e.target.value)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg",children:t})})]}),"Signup"===t?Object(D.jsxs)("p",{className:"text-center",children:["Do you already have an account?"," ",Object(D.jsx)(p.b,{to:"/Login",children:"Login"})]}):Object(D.jsxs)("p",{className:"text-center",children:["Do you need to create an account?"," ",Object(D.jsx)(p.b,{to:"/Signup",children:"Signup"})]})]})},C=Object(v.c)({name:"type",initialState:"",reducers:{changeType:function(e,t){return t.payload}}}),T=C.actions.changeType,_=C.reducer,F=function(){var e=Object(j.b)(),t="Signup";return Object(o.useEffect)((function(){e(T(t))}),[]),Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(z,{access:t,endpoint:"users"})})},B=Object(v.b)("appointments/postAppointments",function(){var e=Object(g.a)(f.a.mark((function e(t){var n,c,a,r,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appointment_date,c=t.doctor_id,a=t.user_id,r=localStorage.getItem("token"),e.next=4,fetch("".concat(y,"/appointments"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({appointment_date:n,doctor_id:c,user_id:a})});case 4:return s=e.sent,e.next=7,s.json();case 7:if(o=e.sent,s.ok){e.next=10;break}throw new Error(o.failure);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=Object(v.b)("appointments/getAppointments",Object(g.a)(f.a.mark((function e(){var t,n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,fetch("".concat(y,"/appointments"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error(n.statusText);case 6:return e.next=8,n.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))),J=Object(v.c)({name:"appointments",initialState:{loading:!1,error:null,data:[]},extraReducers:(a={},Object(h.a)(a,B.pending,(function(e){e.loading=!0})),Object(h.a)(a,B.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(h.a)(a,B.fulfilled,(function(e,t){e.loading=!1,e.data.push(t.payload)})),Object(h.a)(a,q.pending,(function(e){e.loading=!0})),Object(h.a)(a,q.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(h.a)(a,q.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),a)}).reducer,R=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.user})).data,n=Object(j.c)((function(e){return e.appointments})),c=n.data,a=n.loading,r=localStorage.getItem("token");return Object(o.useEffect)((function(){t&&e(q(r))}),[e]),t?Object(D.jsxs)("div",{className:"card text-center",children:[Object(D.jsx)("h3",{children:"Appointments"}),a&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"}),Object(D.jsx)("div",{className:"card-body d-flex flex-wrap",children:!a&&0===c.length&&Object(D.jsxs)("h4",{className:"create-appointment",children:["You do not have any appointment. Create one",Object(D.jsx)(p.b,{to:"/appointments/new",children:"here"})]})}),c&&c.map((function(e){var t=new Date(e.appointment_date).toUTCString();return Object(D.jsx)(p.b,{to:"/appointment/".concat(e.id),children:Object(D.jsx)("div",{className:"card m-4",children:Object(D.jsx)("div",{className:"card-body",children:Object(D.jsxs)("p",{children:["On \xa0",t]})})})},e.id)}))]}):Object(D.jsx)(m.a,{to:"/Login"})},P=Object(v.b)("doctor/getDoctor",function(){var e=Object(g.a)(f.a.mark((function e(t,n){var c,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/doctors/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((c=e.sent).ok){e.next=5;break}throw new Error(c.statusText);case 5:return e.next=7,c.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),U=Object(v.c)({name:"doctor",initialState:{loading:!1,error:null,data:null},extraReducers:(r={},Object(h.a)(r,P.pending,(function(e){e.loading=!0})),Object(h.a)(r,P.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(h.a)(r,P.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),r)}).reducer,G=function(){var e=Object(j.c)((function(e){return e.user})),t=Object(j.c)((function(e){return e.doctor})),n=Object(j.b)(),c=Object(m.h)().id,a=localStorage.getItem("token");if(Object(o.useEffect)((function(){n(P(c,a))}),[]),!e)return Object(D.jsx)(m.a,{to:"/Login"});var r=t.data,s=t.loading;return Object(D.jsxs)("div",{className:"",children:[Object(D.jsx)("div",{className:"text-center",children:s&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"})}),r&&Object(D.jsxs)("div",{className:"card style=width: 18rem",children:[Object(D.jsx)("img",{src:r.image,alt:r.name,className:"card-img-top single-doctor-img"}),Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("p",{children:r.name}),Object(D.jsx)("p",{children:r.specialization}),Object(D.jsx)("p",{children:r.experience}),Object(D.jsx)("p",{children:"experience"}),Object(D.jsx)("p",{children:"consultation fee: 3000 Naira"}),Object(D.jsx)(p.b,{to:{pathname:"/appointments/new",doctorId:r.id},className:"btn btn-info",children:"Add Appointment"})]})]})]})},H=Object(v.b)("doctors/getDoctors",function(){var e=Object(g.a)(f.a.mark((function e(t){var n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/doctors"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.statusText);case 5:return e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M=Object(v.c)({name:"doctors",initialState:{loading:!1,error:null,data:null},extraReducers:(s={},Object(h.a)(s,H.pending,(function(e){e.loading=!0})),Object(h.a)(s,H.rejected,(function(e,t){e.loading=!1,e.error=t.error.message})),Object(h.a)(s,H.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),s)}).reducer,V=function(e){return e.doctors},W=function(){var e=Object(j.b)();Object(o.useEffect)((function(){e(H())}),[e]);var t=Object(j.c)(V),n=t.loading,c=t.data&&t.data.map((function(e){return Object(D.jsx)("div",{className:"card style=width: 18rem ",children:Object(D.jsxs)("div",{className:"card-body col-3 listDoctors",children:[Object(D.jsx)("img",{src:e.image,alt:e.name,className:"card-img-top doctor-img"}),Object(D.jsx)("p",{className:"doctor-name",children:e.name}),Object(D.jsx)("p",{className:"doctor-specialization",children:e.specialization}),Object(D.jsxs)("div",{children:[Object(D.jsx)("p",{className:"doctor-experience",children:e.experience}),Object(D.jsx)("p",{children:"experience"})]}),Object(D.jsx)(p.b,{to:"/doctors/".concat(e.id),className:"btn btn-info ",children:"View Doctor"})]})},e.id)}));return Object(D.jsxs)("div",{className:"",children:[Object(D.jsx)("h2",{children:"Doctors"}),n&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"}),Object(D.jsx)("h2",{children:c})]})},Y=function(){var e=Object(j.b)(),t="Login";Object(o.useEffect)((function(){e(T(t))}),[]);var n=Object(j.c)((function(e){return e.user})).error;return Object(D.jsx)(D.Fragment,{children:n?Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"login-error",children:n}),Object(D.jsx)("br",{}),Object(D.jsx)(z,{access:t,endpoint:"authentications"})]}):Object(D.jsx)(z,{access:t,endpoint:"authentications"})})},K=n(20),Q=n(27);K.b.add(Q.a,Q.c,Q.b);var X=function(){return Object(D.jsxs)("div",{className:"d-flex justify-content-around social-icons",children:[Object(D.jsx)(E.a,{icon:["fab","twitter"],size:"lg",className:""}),Object(D.jsx)(E.a,{icon:["fab","facebook-f"],size:"lg",className:""}),Object(D.jsx)(E.a,{icon:["fab","instagram"],size:"lg",className:""})]})},Z=function(){var e=Object(m.g)(),t=Object(j.b)(),n=localStorage.getItem("token");return Object(D.jsx)("div",{className:"logout",children:n&&Object(D.jsxs)("button",{type:"button","aria-label":"Logout",onClick:function(){localStorage.removeItem("token"),t(S()),e.push("/")},children:[Object(D.jsx)("span",{children:"Logout"}),Object(D.jsx)(E.a,{icon:L.a})]})})},$=function(){var e=Object(j.c)((function(e){return e.user})).data,t=localStorage.getItem("token");return Object(D.jsxs)("nav",{className:"nav",children:[Object(D.jsx)("p",{children:"Echantill hospital"}),Object(D.jsxs)("div",{className:"nav-home d-flex flex-column justify-content-between align-items-center  m-4",children:[Object(D.jsxs)("div",{children:[e&&e.username,t?Object(D.jsxs)("div",{children:[Object(D.jsx)(p.b,{to:"/doctors",className:"doc nav-link active",children:"Doctors"}),Object(D.jsx)(p.b,{to:"/appointments",className:"appoint-md nav-link",children:"Appointments"}),Object(D.jsx)(Z,{})]}):Object(D.jsxs)("div",{className:"nav-home",children:[Object(D.jsx)(p.b,{to:"/",className:"nav-link",children:"Home"}),Object(D.jsx)(p.b,{to:"/Signup",className:"nav-link",children:"Signup"}),Object(D.jsx)(p.b,{to:"/Login",className:"nav-link",children:"Login"})]})]}),Object(D.jsxs)("div",{className:"nav-footer",children:[Object(D.jsx)(X,{}),Object(D.jsx)("p",{children:"\xa92021, Echantill hospital"})]})]})]})},ee=function(){var e=Object(o.useState)(""),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(""),r=Object(O.a)(a,2),s=r[0],i=r[1],l=Object(o.useState)(!1),d=Object(O.a)(l,2),b=d[0],u=d[1],p=Object(o.useState)(!1),h=Object(O.a)(p,2),x=h[0],f=h[1],g=Object(j.c)((function(e){return e.user})).data,v=Object(j.b)(),N=Object(j.c)((function(e){return e.doctors})),y=N.data,w=N.error,k=s,S=n;if(!g)return Object(D.jsx)(m.a,{to:"/Login"});var A=g.user_id,E=y&&y.map((function(e){return Object(D.jsx)("option",{value:e.id,children:e.name},e.id)}));return b?Object(D.jsx)(m.a,{to:"/appointments"}):Object(D.jsx)("div",{className:"col-md-12",children:Object(D.jsx)("div",{className:"card card-container",children:Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u(!1),v(B({user_id:A,doctor_id:k,appointment_date:S})).then((function(){u(!0),alert.show("Appointment created",{type:"success",timeout:2e3}),f(!1)})).catch((function(e){console.log(e.message),u(!1)}))},children:[!b&&Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"appointmentDate",className:"control-label",children:["Appointment Date",Object(D.jsx)("input",{type:"datetime-local",className:"form-control",name:"appointmentDate",id:"appointmentDate",required:!0,value:n,onChange:function(e){var t=e.target.value;c(t)}})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("label",{htmlFor:"doctorId",children:["Select from list:",Object(D.jsx)("select",{className:"form-control",id:"doctorId",onChange:function(e){var t=e.target.value;i(t)},value:s,selected:k,children:x?Object(D.jsx)("option",{children:"Loading.."}):E})]})}),Object(D.jsx)("div",{className:"form-group create",children:Object(D.jsxs)("button",{className:"btn btn-primary btn-block",disabled:x,type:"submit",children:[x&&Object(D.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(D.jsx)("span",{children:"Book"})]})})]}),w&&Object(D.jsx)("div",{className:"form-group",children:Object(D.jsx)("div",{className:b?"alert alert-success":"alert alert-danger",role:"alert",children:w})})]})})})},te=function(){var e=Object(o.useState)(!1),t=Object(O.a)(e,1)[0],n=Object(j.c)((function(e){return e.user})).data,c=Object(j.c)((function(e){return e.doctor})),a=Object(j.b)();if(!n)return Object(D.jsx)(m.a,{to:"/Login"});var r=Object(m.h)().id;if(t)return Object(D.jsx)(m.a,{to:"/appointments"});var s=c.data,i=c.error,l=c.loading;return Object(D.jsx)("div",{className:"container",children:Object(D.jsxs)("header",{className:"jumbotron",children:[l&&Object(D.jsx)("span",{className:"spinner-border spinner-border-lg"}),c&&Object(D.jsx)("div",{className:"card w-50",children:Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsxs)("p",{className:"card-text",children:["Appointment Id: \xa0",r]}),Object(D.jsxs)("p",{children:["With \xa0",Object(D.jsx)(p.b,{to:"/doctors/".concat(c.id),children:c.data.name})]}),Object(D.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){!function(e){var t=localStorage.getItem("token");fetch("".concat(y,"/appointments/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(){return a(q(t))}))}(r)},disabled:l,children:"Delete"})]})}),i&&Object(D.jsx)("p",{children:s})]})})},ne=function(){return Object(D.jsxs)("div",{className:"card style=width: 18rem home m-4",children:[Object(D.jsx)("img",{src:"https://user-images.githubusercontent.com/51296741/128604204-e71d0644-e88f-4743-b922-e708aa5a23d9.png",className:"card-img-top",alt:"home-page"}),Object(D.jsx)("div",{className:"card-body"})]})};var ce=function(){return Object(D.jsx)("div",{className:"container",children:Object(D.jsx)("div",{className:"row",children:Object(D.jsxs)(p.a,{children:[Object(D.jsx)("div",{className:"col-3",children:Object(D.jsx)($,{})}),Object(D.jsx)(m.d,{children:Object(D.jsxs)("div",{className:"col-9",children:[Object(D.jsx)(m.b,{exact:!0,path:"/Signup",component:F}),Object(D.jsx)(m.b,{exact:!0,path:"/Login",component:Y}),Object(D.jsx)(m.b,{exact:!0,path:"/doctors",component:W}),Object(D.jsx)(m.b,{exact:!0,path:"/doctors/:id",component:G}),Object(D.jsx)(m.b,{exact:!0,path:"/appointments/new",component:ee}),Object(D.jsx)(m.b,{exact:!0,path:"/appointments",component:R}),Object(D.jsx)(m.b,{exact:!0,path:"/appointment/:id",component:te}),Object(D.jsx)(m.b,{exact:!0,path:"/",component:ne})]})})]})})})},ae=(n(49),n(10)),re=n(19),se=n(33),oe=n.n(se),ie=Object(ae.b)({doctors:M,appointments:J,user:A,type:_,doctor:U}),le={key:"root",version:1,storage:oe.a},de=Object(re.g)(le,ie),je=Object(v.a)({reducer:de,middleware:function(e){return e({serializableCheck:{ignoredActions:[re.a,re.f,re.b,re.c,re.d,re.e]}})}}),be=Object(b.a)(je);d.a.render(Object(D.jsx)(i.a.StrictMode,{children:Object(D.jsx)(j.a,{store:je,children:Object(D.jsx)(u.a,{loading:null,persistor:be,children:Object(D.jsx)(ce,{})})})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.b93a8e19.chunk.js.map